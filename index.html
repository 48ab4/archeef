<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญุงุณุจุฉ ุงูุชูุฒูุน ุงููุงูู ุงููุชูุฏูุฉ</title>
    <!-- ุชุญููู Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #eef2ff; /* Light blue background */
        }
        .card {
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        .result-box {
            border-bottom: 5px solid; /* Stronger border for final results */
            transition: transform 0.2s;
        }
        .result-box:hover {
             transform: translateY(-3px);
        }
        /* Custom scrollbar for steps */
        .steps-container {
            max-height: 400px;
            overflow-y: auto;
            border-radius: 0.5rem;
            padding: 1rem;
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex items-start justify-center">

    <div class="w-full max-w-4xl bg-white rounded-xl card p-6 sm:p-10 mt-10">
        <h1 class="text-3xl font-extrabold text-center text-indigo-700 mb-8 border-b-2 pb-2 border-indigo-200">ูุธุงู ุญุณุงุจ ูุชูุฒูุน ุงููุจุงูุบ ุงููุงูู ุงููุชูุฏู</h1>

        <!-- ูุณู ุฅุฏุฎุงู ุงูุจูุงูุงุช -->
        <div class="mb-10 border-b pb-6 border-gray-200">
            <h2 class="text-2xl font-bold text-gray-800 mb-5 flex items-center">
                <span class="text-indigo-500 ml-2">๐ข</span>
                1. ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- ุฅุฌูุงูู ุญุณุงุจ ุนุจุฏุงูุนุงูู -->
                <div>
                    <label for="abdulalaimTotal" class="block text-sm font-medium text-gray-700 mb-1">ุฅุฌูุงูู ุญุณุงุจ ุนุจุฏุงูุนุงูู (ุฑูุงู)</label>
                    <input type="number" id="abdulalaimTotal" placeholder="ุฃุฏุฎู ุงููุจูุบ ููุง (ูุซุงู: 5000)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 text-right bg-gray-50">
                </div>
                <!-- ุฅุฌูุงูู ุญุณุงุจ ุฅุฎูุชู -->
                <div>
                    <label for="siblingsTotal" class="block text-sm font-medium text-gray-700 mb-1">ุฅุฌูุงูู ุญุณุงุจ ุฅุฎูุชู (ุฑูุงู)</label>
                    <input type="number" id="siblingsTotal" placeholder="ุฃุฏุฎู ุงููุจูุบ ููุง (ูุซุงู: 10000)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 text-right bg-gray-50">
                </div>
            </div>

            <div class="mt-8 flex flex-col md:flex-row md:items-center md:gap-8 gap-4">
                <button onclick="calculateDistribution()" class="w-full md:w-auto px-10 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition duration-200 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50 text-lg">
                    ุชูููุฐ ูุญุณุงุจ ุงูุชูุฒูุน ุงูููุฑู
                </button>
                <div class="flex items-center">
                    <input id="deductMaryam" type="checkbox" class="h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded ml-1 md:ml-0" onchange="calculateDistribution()">
                    <label for="deductMaryam" class="mr-2 text-md font-medium text-gray-800">
                        ุฎุตู ุญู ูุฑูู (500 ุฑูุงู)
                    </label>
                </div>
            </div>
        </div>

        <!-- ูุณู ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ -->
        <div class="mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-5 flex items-center">
                <span class="text-green-500 ml-2">โ</span>
                8. ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ ุงููุนุชูุฏุฉ
            </h2>
            <div id="finalResults" class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                <!-- ุงููุชุงุฆุฌ ุณุชุธูุฑ ููุง -->
            </div>
        </div>

        <!-- ูุณู ุงูุฎุทูุงุช ุงูุชูุตูููุฉ ูุงููุจุงูุบ ุงููุฎุตููุฉ (ุงูุชูุตูู ุงููุฑุชุจ) -->
        <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-5 flex items-center">
                <span class="text-blue-500 ml-2">๐</span>
                ุงูุฎุทูุงุช ุงูุชูุตูููุฉ ููุญุณุงุจ (ูู 1 ุฅูู 8)
            </h2>
            <div class="steps-container bg-gray-50 p-4 rounded-lg border border-gray-200">
                <div id="detailedSteps" class="space-y-6 text-sm text-gray-700">
                    <p class="text-center text-gray-500 p-4">ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุฃุฑูุงู ูุงูุถุบุท ุนูู ุฒุฑ ุงูุญุณุงุจ ูุนุฑุถ ุชุณูุณู ุงูุฎุทูุงุช.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ุฏุงูุฉ ูููุณุงุนุฏุฉ ูู ุชูุณูู ุงูุฃุฑูุงู ูุนููุฉ (ุฑูุงู ุณุนูุฏู)
        const formatCurrency = (amount) => {
            if (isNaN(amount) || amount === null) return '0.00 ุฑูุงู';
            // ุงุณุชุฎุฏุงู Math.round ูุถูุงู ุฏูุฉ ูู ุงูุฃุฑูุงู ุงูุชู ุชุญุชูู ุนูู ูุณูุฑ
            return parseFloat(amount).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ' ุฑูุงู';
        };

        function calculateDistribution() {
            // 1. ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
            const T_A = parseFloat(document.getElementById('abdulalaimTotal').value) || 0;
            const T_S = parseFloat(document.getElementById('siblingsTotal').value) || 0;
            const isMaryamDeduction = document.getElementById('deductMaryam').checked; // <-- ุฅุถุงูุฉ: ุงูุชุญูู ูู ุฎุงูุฉ ุงูุงุฎุชูุงุฑ
            const maryamAmount = 500; // ูุจูุบ ูุฑูู

            const R_C = 20; // 20 ุฑูุงู ููู 1000 ุฑูุงู ุชุญููู
            const D_A_rate = 0.05; // 5%
            const D_S_rate = 0.15; // 15%

            // ุงูุชุญูู ูู ุฃู ุงููุจุงูุบ ุงููุฏุฎูุฉ ูุง ุชูู ุนู ุตูุฑ
            if (T_A < 0 || T_S < 0) {
                document.getElementById('finalResults').innerHTML = '<p class="text-red-600 col-span-3 text-center p-4 bg-red-100 rounded-lg font-semibold">โ๏ธ ุงูุฑุฌุงุก ุฅุฏุฎุงู ูุจุงูุบ ุตุญูุญุฉ (ุฃุฑูุงู ููุฌุจุฉ).</p>';
                document.getElementById('detailedSteps').innerHTML = '';
                return;
            }

            // 2. ุฎุตู ุงููุณุจ ุงููุญุฏุฏุฉ & 3. ุญุณุงุจ ุงููุณุจ ุงููุฎุตููุฉ
            const D_A_amt = T_A * D_A_rate;
            const D_S_amt = T_S * D_S_rate;

            let B_A1 = T_A - D_A_amt; // ุญุณุงุจ ุนุจุฏุงูุนุงูู ุจุนุฏ ุงูุฎุตู ุงูุฃููู
            let B_S1 = T_S - D_S_amt; // ุญุณุงุจ ุงูุฅุฎูุฉ ุจุนุฏ ุงูุฎุตู ุงูุฃููู
            
            // 4. ุชุฌููุน ุงููุจุงูุบ ุงููุฎุตููุฉ
            const D_Total = D_A_amt + D_S_amt;
            
            // 5. ุชุทุจูู ุฎุตู ูุฑูู (ุฅุฐุง ุชู ุชุญุฏูุฏู) ูุชูุฒูุน ุงููุฌููุน
            // <-- ุจุฏุงูุฉ ุงูุชุนุฏูู: ุชุทุจูู ุฎุตู ูุฑูู ูุจู ุงูุชูุฒูุน
            const maryamDeductionAmount = isMaryamDeduction ? Math.min(maryamAmount, D_Total) : 0;
            
            const D_Total_Distributable = D_Total - maryamDeductionAmount;
            const Add_Half = D_Total_Distributable / 2; // ูุชู ุงูุชูุณูู ุจูุงุกู ุนูู ุงููุจูุบ ุงููุชุจูู
            // <-- ููุงูุฉ ุงูุชุนุฏูู

            let B_A2 = B_A1 + Add_Half; // ุญุณุงุจ ุนุจุฏุงูุนุงูู ุจุนุฏ ุงูุฅุถุงูุฉ
            let Final_Asim = Add_Half;       // ุญุณุงุจ ุนุงุตู ุจุนุฏ ุงูุฅุถุงูุฉ (ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูู)

            // 6. ุญุณุงุจ ุนูููุฉ ุงูุชุญููู (20 ุฑูุงู ููู 1000 ุฑูุงู) - ุชู ุงูุชุญุฏูุซ ููุชู ุญุณุงุจู ุจูุงุกู ุนูู ุงูุฑุตูุฏ ุงููุนุฏู
            
            // ุงูุนูููุฉ ุชุญุณุจ ูุญุณุงุจ ุนุจุฏุงูุนุงูู ุจูุงุกู ุนูู ุฑุตูุฏู ุจุนุฏ ุงูุฎุตู ูุงูุฅุถุงูุฉ (B_A2)
            const C_A = (B_A2 / 1000) * R_C; 
            
            // ุงูุนูููุฉ ุชุญุณุจ ูุญุณุงุจ ุงูุฅุฎูุฉ ุจูุงุกู ุนูู ุฑุตูุฏูู ุจุนุฏ ุงูุฎุตู ุงูุฃููู (B_S1)
            const C_S = (B_S1 / 1000) * R_C; 

            // 7. ุฎุตู ุนูููุฉ ุงูุชุญููู
            const Final_A = B_A2 - C_A;
            const Final_S = B_S1 - C_S;
            // Final_Asim ุชู ุญุณุงุจู ูู ุงูุฎุทูุฉ 5

            // 8. ุนุฑุถ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ
            displayFinalResults(Final_A, Final_S, Final_Asim);
            // ุชูุฑูุฑ ุงููุชุบูุฑุงุช ุงูุฌุฏูุฏุฉ ุฅูู ุฏุงูุฉ ุนุฑุถ ุงูุฎุทูุงุช
            displayDetailedSteps(T_A, T_S, D_A_amt, D_S_amt, D_Total, Add_Half, C_A, C_S, B_A1, B_S1, B_A2, Final_A, Final_S, Final_Asim, maryamDeductionAmount, D_Total_Distributable);
        }

        function displayFinalResults(Final_A, Final_S, Final_Asim) {
            const resultsHTML = `
                <!-- ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูุญุณุงุจ ุนุจุฏุงูุนุงูู -->
                <div class="p-5 bg-green-50 rounded-xl result-box border-green-500">
                    <p class="text-lg font-semibold text-green-700">ุนุจุฏุงูุนุงูู</p>
                    <p class="text-3xl font-extrabold text-green-800 mt-1">${formatCurrency(Final_A)}</p>
                    <span class="inline-block px-3 py-1 text-xs font-semibold text-green-800 bg-green-200 rounded-full mt-2">ุฑุตูุฏ ููุงุฆู</span>
                </div>

                <!-- ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูุญุณุงุจ ุงูุฅุฎูุฉ -->
                <div class="p-5 bg-yellow-50 rounded-xl result-box border-yellow-500">
                    <p class="text-lg font-semibold text-yellow-700">ุญุณุงุจ ุฅุฎูุชู</p>
                    <p class="text-3xl font-extrabold text-yellow-800 mt-1">${formatCurrency(Final_S)}</p>
                    <span class="inline-block px-3 py-1 text-xs font-semibold text-yellow-800 bg-yellow-200 rounded-full mt-2">ุจุนุฏ ุงูุฎุตู ูุงูุนูููุฉ</span>
                </div>
                
                <!-- ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูุญุณุงุจ ุนุงุตู -->
                <div class="p-5 bg-blue-50 rounded-xl result-box border-blue-500">
                    <p class="text-lg font-semibold text-blue-700">ุนุงุตู</p>
                    <p class="text-3xl font-extrabold text-blue-800 mt-1">${formatCurrency(Final_Asim)}</p>
                    <span class="inline-block px-3 py-1 text-xs font-semibold text-blue-800 bg-blue-200 rounded-full mt-2">ูุตูุจ ูู ุงููุฎุตูู</span>
                </div>
            `;
            document.getElementById('finalResults').innerHTML = resultsHTML;
        }

        function displayDetailedSteps(T_A, T_S, D_A_amt, D_S_amt, D_Total, Add_Half, C_A, C_S, B_A1, B_S1, B_A2, Final_A, Final_S, Final_Asim, maryamDeductionAmount, D_Total_Distributable) {
            
            // <-- ุจุฏุงูุฉ ุงูุฅุถุงูุฉ: ุฅูุดุงุก ููุฏ HTML ูุนุฑุถ ุฎุตู ูุฑูู ููุท ุฅุฐุง ูุงู ููุนูุงู
            const maryamDeductionHTML = maryamDeductionAmount > 0 ? `
                <p class="text-red-700 font-bold mt-2"><strong>โข ุฎุตู ุญู ูุฑูู:</strong> -${formatCurrency(maryamDeductionAmount)}</p>
                <p class="mt-1"><strong>โข ุงููุจูุบ ุงููุชุจูู ููุชูุฒูุน:</strong> ${formatCurrency(D_Total_Distributable)}</p>
            ` : `
                <p class="mt-2"><strong>โข ุงููุจูุบ ุงููุงุจู ููุชูุฒูุน:</strong> ${formatCurrency(D_Total)}</p>
            `;
            // <-- ููุงูุฉ ุงูุฅุถุงูุฉ

            // <-- ุจุฏุงูุฉ ุงูุฅุถุงูุฉ: ุญุณุงุจ ุฅุฌูุงูู ุงูุนูููุฉ ูุฅุนุฏุงุฏ ููุฎุต ูุฑูู ููุฎุทูุฉ 8
            const C_Total = C_A + C_S;
            const maryamSummaryHTML = maryamDeductionAmount > 0 ? `
                <p>โข ุงููุจูุบ ุงููุฏููุน ููุฑูู: <strong class="text-red-700">${formatCurrency(maryamDeductionAmount)}</strong></p>
            ` : '';
            // <-- ููุงูุฉ ุงูุฅุถุงูุฉ

            // <-- ุจุฏุงูุฉ ุงูุฅุถุงูุฉ: ุญุณุงุจ ุงููุจูุบ ุงููุณุชุญู ููุชุญููู
            const transferAmount = Final_A + Final_S;
            // <-- ููุงูุฉ ุงูุฅุถุงูุฉ


            const stepsHTML = `
                <div class="space-y-6">

                    <!-- ุงูุฎุทูุฉ 1: ุงููุฏุฎูุงุช -->
                    <div class="bg-indigo-50 p-4 rounded-lg border-r-4 border-indigo-500">
                        <h3 class="flex items-center text-lg font-extrabold text-indigo-700 mb-2">
                            <span class="ml-2 bg-indigo-500 text-white w-6 h-6 flex items-center justify-center rounded-full text-sm">1</span>
                            ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ (ุงููุฏุฎูุงุช)
                        </h3>
                        <p class="text-gray-800">ุฅุฌูุงูู ุญุณุงุจ ุนุจุฏุงูุนุงูู: <strong class="text-indigo-900">${formatCurrency(T_A)}</strong></p>
                        <p class="text-gray-800">ุฅุฌูุงูู ุญุณุงุจ ุฅุฎูุชู: <strong class="text-indigo-900">${formatCurrency(T_S)}</strong></p>
                    </div>

                    <!-- ุงูุฎุทูุงุช 2 ู 3: ุงูุฎุตู ูุญุณุงุจ ุงููุจุงูุบ ุงููุฎุตููุฉ -->
                    <div class="bg-red-50 p-4 rounded-lg border-r-4 border-red-500">
                        <h3 class="flex items-center text-lg font-extrabold text-red-700 mb-2">
                            <span class="ml-2 bg-red-500 text-white w-6 h-6 flex items-center justify-center rounded-full text-sm">2-3</span>
                            ุฎุตู ุงููุณุจ ูุญุณุงุจ ุงููุจุงูุบ ุงููุฎุตููุฉ
                        </h3>
                        <p><strong>โข ุงููุจูุบ ุงููุฎุตูู ูู ุนุจุฏุงูุนุงูู (5%):</strong> <span class="text-red-700 font-bold">${formatCurrency(D_A_amt)}</span></p>
                        <p><strong>โข ุงููุจูุบ ุงููุฎุตูู ูู ุงูุฅุฎูุฉ (15%):</strong> <span class="text-red-700 font-bold">${formatCurrency(D_S_amt)}</span></p>
                        <hr class="my-2 border-red-200">
                        <p>ุงูุฑุตูุฏ ุงููุคูุช ูุนุจุฏุงูุนุงูู (ุจุนุฏ ุงูุฎุตู ุงูุฃููู): <strong class="text-gray-900">${formatCurrency(B_A1)}</strong></p>
                        <p>ุงูุฑุตูุฏ ุงููุคูุช ููุฅุฎูุฉ (ุจุนุฏ ุงูุฎุตู ุงูุฃููู): <strong class="text-gray-900">${formatCurrency(B_S1)}</strong></p>
                    </div>

                    <!-- ุงูุฎุทูุงุช 4 ู 5: ุชุฌููุน ูุชูุฒูุน ุงููุฎุตูู -->
                    <div class="bg-yellow-50 p-4 rounded-lg border-r-4 border-yellow-500">
                        <h3 class="flex items-center text-lg font-extrabold text-yellow-700 mb-2">
                            <span class="ml-2 bg-yellow-500 text-white w-6 h-6 flex items-center justify-center rounded-full text-sm">4-5</span>
                            ุชุฌููุน ูุชูุฒูุน ุงููุจุงูุบ ุงููุฎุตููุฉ
                        </h3>
                        <p><strong>ุงููุฌููุน ุงููุฎุตูู ุงูููู (D_Total):</strong> <strong class="text-yellow-900 text-lg">${formatCurrency(D_Total)}</strong></p>
                        
                        ${maryamDeductionHTML} <!-- <-- ุชู ุงุณุชุจุฏุงู ุงูููุฏ ุงูุซุงุจุช ุจุงููุชุบูุฑ ุงูุฌุฏูุฏ -->

                        <p class="mt-2">ูุตูุจ ุงููุตู ุงููุงุญุฏ (ูู ุงููุจูุบ ุงููุชุจูู): <strong class="text-green-700">${formatCurrency(Add_Half)}</strong> (ููุถุงู ููู ูู ุนุจุฏุงูุนุงูู ูุนุงุตู)</p>
                        <hr class="my-2 border-yellow-200">
                        <p><strong>โข ุฑุตูุฏ ุนุงุตู ุงูุฃููู:</strong> <strong class="text-blue-700 font-bold">${formatCurrency(Final_Asim)}</strong></p>
                        <p><strong>โข ุฑุตูุฏ ุนุจุฏุงูุนุงูู ุจุนุฏ ุงูุฅุถุงูุฉ (ุงูุฑุตูุฏ ุงูุฃุณุงุณู ูุญุณุงุจ ุงูุนูููุฉ):</strong> ${formatCurrency(B_A1)} + ${formatCurrency(Add_Half)} = <strong class="text-gray-900">${formatCurrency(B_A2)}</strong></p>
                    </div>

                    <!-- ุงูุฎุทูุงุช 6 ู 7: ุญุณุงุจ ูุฎุตู ุงูุนูููุฉ (ุงูุชุทุจูู ุงูุฌุฏูุฏ) -->
                    <div class="bg-purple-50 p-4 rounded-lg border-r-4 border-purple-500">
                        <h3 class="flex items-center text-lg font-extrabold text-purple-700 mb-2">
                            <span class="ml-2 bg-purple-500 text-white w-6 h-6 flex items-center justify-center rounded-full text-sm">6-7</span>
                            ุญุณุงุจ ูุฎุตู ุนูููุฉ ุงูุชุญููู (ูุจูู ุนูู ุงูุฃุฑุตุฏุฉ ุงููุนุฏูุฉ)
                        </h3>
                        <p><strong>ุนูููุฉ ุนุจุฏุงูุนุงูู:</strong> ูุญุณูุจุฉ ุนูู ุงูุฑุตูุฏ ุงููุนุฏู (${formatCurrency(B_A2)}) = <strong class="text-purple-700">${formatCurrency(C_A)}</strong></p>
                        <p><strong>ุนูููุฉ ุงูุฅุฎูุฉ:</strong> ูุญุณูุจุฉ ุนูู ุงูุฑุตูุฏ ุจุนุฏ ุงูุฎุตู ุงูุฃููู (${formatCurrency(B_S1)}) = <strong class="text-purple-700">${formatCurrency(C_S)}</strong></p>
                        <hr class="my-2 border-purple-200">
                        <p>ุงูุฑุตูุฏ ุงูููุงุฆู ูุนุจุฏุงูุนุงูู: ${formatCurrency(B_A2)} - ${formatCurrency(C_A)} = <span class="text-green-700 font-extrabold">${formatCurrency(Final_A)}</span></p>
                        <p>ุงูุฑุตูุฏ ุงูููุงุฆู ููุฅุฎูุฉ: ${formatCurrency(B_S1)} - ${formatCurrency(C_S)} = <span class="text-yellow-700 font-extrabold">${formatCurrency(Final_S)}</span></p>
                    </div>

                    <!-- ุงูุฎุทูุฉ 8: ููุฎุต ุงููุชุงุฆุฌ ุงูุดุงูู (ุชู ุงูุชุนุฏูู) -->
                    <div class="bg-teal-50 p-4 rounded-lg border-r-4 border-teal-500">
                        <h3 class="flex items-center text-lg font-extrabold text-teal-700 mb-2">
                            <span class="ml-2 bg-teal-500 text-white w-6 h-6 flex items-center justify-center rounded-full text-sm">8</span>
                            ููุฎุต ุงููุชุงุฆุฌ ุงูุดุงูู
                        </h3>
                        
                        <h4 class="text-md font-bold text-teal-800 mt-3 mb-1">ุงูุฃุฑุตุฏุฉ ุงูููุงุฆูุฉ:</h4>
                        <p>โข ุญุณุงุจ ุนุจุฏุงูุนุงูู ุงูููุงุฆู: <strong class="text-teal-900 text-xl">${formatCurrency(Final_A)}</strong></p>
                        <p>โข ุญุณุงุจ ุงูุฅุฎูุฉ ุงูููุงุฆู: <strong class="text-teal-900 text-xl">${formatCurrency(Final_S)}</strong></p>
                        <p>โข ุญุณุงุจ ุนุงุตู ุงูููุงุฆู: <strong class="text-teal-900 text-xl">${formatCurrency(Final_Asim)}</strong></p>

                        <p class="mt-2">โข ุงููุจูุบ ุงูุฅุฌูุงูู ุงููุณุชุญู ููุชุญููู: <strong class="text-blue-700 font-bold text-xl">${formatCurrency(transferAmount)}</strong></p>

                        <hr class="my-3 border-teal-200">

                        <h4 class="text-md font-bold text-gray-700 mb-1">ุชูุงุตูู ุงูุฎุตููุงุช ูุงูุชูุงููู:</h4>
                        <p>โข ุงููุจูุบ ุงููุฎุตูู ูู ุนุจุฏุงูุนุงูู (5%): <strong class="text-red-700">${formatCurrency(D_A_amt)}</strong></p>
                        <p>โข ุงููุจูุบ ุงููุฎุตูู ูู ุงูุฅุฎูุฉ (15%): <strong class="text-red-700">${formatCurrency(D_S_amt)}</strong></p>
                        <p>โข ุฅุฌูุงูู ุนูููุฉ ุงูุชุญููู ุงูุจููู: <strong class="text-purple-700">${formatCurrency(C_Total)}</strong></p>
                        ${maryamSummaryHTML}
                    </div>
                </div>
            `;
            document.getElementById('detailedSteps').innerHTML = stepsHTML;
        }

        // ุชูููุฐ ุงูุญุณุงุจ ุนูุฏ ุชุญููู ุงูุตูุญุฉ ุจููู ุตูุฑูุฉ ูุชููุฆุฉ ุงููุงุฌูุฉ
        window.onload = function() {
            // ูุชู ุงุณุชุฏุนุงุก calculateDistribution() ูุชููุฆุฉ ุงููุชุงุฆุฌ ุงูุฃูููุฉ (ุจููู ุตูุฑ)
            // ูููุชุฃูุฏ ูู ุธููุฑ ุชูุงุตูู ุงูุฎุทูุงุช ุจุดูู ููุธู ุนูุฏ ุฃูู ุชุญููู
            calculateDistribution();

            // <-- ุฅุถุงูุฉ: ุฑุจุท ุฎุงูุฉ ุงูุงุฎุชูุงุฑ ุจุฅุนุงุฏุฉ ุงูุญุณุงุจ
            document.getElementById('deductMaryam').addEventListener('change', calculateDistribution);
        };

    </script>
</body>
</html>
