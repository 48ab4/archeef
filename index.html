<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø±Ø¨Ø· Ø¬ÙˆØ¬Ù„ Ø¯Ø±Ø§ÙŠÙ</title>
  <script src="https://apis.google.com/js/api.js"></script>
  <style>
    body {
      font-family: 'Tahoma', sans-serif;
      direction: rtl;
      background-color: #f8fafc;
      padding: 2rem;
      text-align: center;
    }
    .btn {
      background-color: #2563eb;
      color: white;
      padding: 1rem 2rem;
      border-radius: 0.5rem;
      font-size: 1.2rem;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    .btn:hover {
      background-color: #1e40af;
    }
    .status {
      margin-top: 1rem;
      font-size: 1rem;
      color: #15803d;
    }
  </style>
</head>
<body>

  <h1>ğŸ”— Ø±Ø¨Ø· Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø¹ Google Drive</h1>
  <button id="connectBtn" class="btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google</button>

  <div id="status" class="status"></div>

  <script>
    const CLIENT_ID = '883555732132-kktvprdnoh95l05e7gdfo58g3ths4api.apps.googleusercontent.com';
    const API_KEY = 'AIzaSyBTYQ93RUBmgvOZjw0B3dGI0cQlDEu1z3I';
    const SCOPES = 'https://www.googleapis.com/auth/drive.file';

    let isConnected = false;

    document.getElementById('connectBtn').addEventListener('click', () => {
      gapi.load('client:auth2', initClient);
    });

    function initClient() {
      gapi.client.init({
        apiKey: API_KEY,
        clientId: CLIENT_ID,
        discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],
        scope: SCOPES
      }).then(() => {
        const authInstance = gapi.auth2.getAuthInstance();
        
        // ÙØ±Ø¶ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¯Ø§Ø¦Ù…Ù‹Ø§
        authInstance.signIn({ prompt: 'select_account' }).then(() => {
          const user = authInstance.currentUser.get();
          const profile = user.getBasicProfile();
          const email = profile.getEmail();

          isConnected = true;
          document.getElementById('status').innerHTML = `âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø­Ø³Ø§Ø¨: <strong>${email}</strong>`;
          document.getElementById('connectBtn').innerText = 'âœ… Ù…ØªØµÙ„ Ø¨Ø¬ÙˆØ¬Ù„ Ø¯Ø±Ø§ÙŠÙ';
          document.getElementById('connectBtn').disabled = true;
        }).catch((error) => {
          console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
          document.getElementById('status').innerText = 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø­Ø³Ø§Ø¨ Google.';
        });
      });
    }
  </script>

</body>
</html>
